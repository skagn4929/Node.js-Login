# Node.js-Login
Node.js í™˜ê²½ì—ì„œ ê°„ë‹¨í•œ Login ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê³¼ì •ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.

## 1. Expressë¡œ ì„œë²„ ë„ì›Œë³´ê¸°
ï¸ğŸŒ Expressë¥¼ ì‚¬ìš©í•´ì„œ ì›¹ ì„œë²„ë¥¼ ë„ìš°ê³ , í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ ê²½ë¡œë¡œ ì´ë™í•˜ëŠ” ë¼ìš°íŒ… ê¸°ëŠ¥ê¹Œì§€ êµ¬í˜„

![1](https://velog.velcdn.com/images/kitree/post/9f7852c1-4b87-46a6-b403-ce1fe426eee2/image.JPG)

![22](https://github.com/skagn4929/Node.js-Login/assets/134206709/9a898734-f3c9-4bea-8643-a2cdf96c8ec5)


![3](https://velog.velcdn.com/images/kitree/post/2f72d811-0d19-4f0f-b257-fde6952353b4/image.JPG)
![4](https://velog.velcdn.com/images/kitree/post/1277eb8f-9232-4d6f-927b-2adfea21042a/image.JPG)

## 2. ë¡œê·¸ì¸ í™”ë©´ ë§Œë“¤ê¸°
âœï¸ ë¡œê·¸ì¸ í™”ë©´ì„ í•˜ë“œì½”ë”©í•˜ì—¬ êµ¬í˜„

![](https://velog.velcdn.com/images/kitree/post/597f34df-0f96-4441-bf05-affbf19618a3/image.JPG)

![](https://velog.velcdn.com/images/kitree/post/2c71755c-ceda-4630-b97a-f6896a2057a4/image.JPG)

## 3. ë¡œê·¸ì¸ ë·°(view) ìµœì í™”
ï¸ğŸ“ ejs ëª¨ë“ˆì„ ë°›ê³  index.ejsì™€ login.ejs íŒŒì¼ì„ ë§Œë“¤ì–´ ë¶„ë¥˜

![](https://velog.velcdn.com/images/kitree/post/6529790e-9b16-4502-9e32-86208f67cfd8/image.JPG)

ğŸ’» í•˜ë“œì½”ë”©ì—ì„œ ë·° ì—”ì§„ìœ¼ë¡œ ì½”ë“œ ìµœì í™” ì‘ì—…

![](https://velog.velcdn.com/images/kitree/post/70e6afd5-bd7f-4ba7-8198-e2936501a829/image.JPG)

## 4. ë¼ìš°íŒ… ë¶„ë¦¬
ï¸ğŸ”„ ë¼ìš°íŠ¸ í´ë”ë¥¼ ìƒì„±í•˜ê³ , ê·¸ ì•ˆì— ë¯¸ë“¤ì›¨ì–´ë¥¼ ë‹´ì„ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±

![](https://velog.velcdn.com/images/kitree/post/c36983a0-9fbf-41d7-89d4-6cc6c14b0180/image.JPG)

ï¸ğŸ“¡ use ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë“±ë¡

![](https://velog.velcdn.com/images/kitree/post/14be5c7a-0af7-4af7-ab93-20a11025f610/image.JPG)

## 5. ì»¨íŠ¸ë¡¤ëŸ¬(Controller) ë¶„ë¦¬
> ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì‚¬ìš©ì ì…ë ¥ì„ ì²˜ë¦¬í•˜ê³  ëª¨ë¸ ë° ë·° ê°„ì˜ ìƒí˜¸ ì‘ìš©ì„ ì¡°ì •í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

ğŸ® ì»¨íŠ¸ë¡¤ëŸ¬ì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ì„ ë”°ë¡œ ë¶„ë¦¬í•˜ì—¬ ì‘ì—…

![](https://velog.velcdn.com/images/kitree/post/bc066220-9606-40c8-8c01-0fadb68426d7/image.JPG)

ğŸ“š ì»¨íŠ¸ë¡¤ëŸ¬ ë¶€ë¶„ì„ ëª¨ë“ˆí™”í•˜ì—¬ ê²½ë¡œì— ë”°ë¼ ë‹¤ë¥¸ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ í•¨.

![](https://velog.velcdn.com/images/kitree/post/ea168379-68da-426d-90a7-ce30c2fdc5ef/image.JPG)

## 6. app.listen() ëª¨ë“ˆí™”
ğŸ’» ì„œë²„ë¥¼ ë„ì›Œì£¼ëŠ” app.listen() ë¶€ë¶„ì„ ë”°ë¡œ ë¶„ë¦¬í•˜ì—¬ ì—°ê²° ì‘ì—…

![](https://velog.velcdn.com/images/kitree/post/95370ee1-fd61-4b7a-818c-4df6a56ab4ef/image.JPG)
![](https://velog.velcdn.com/images/kitree/post/14f3d1eb-d03d-422e-8df8-83497143d83f/image.JPG)

## 7. í”„ëŸ°íŠ¸ë¥¼ ìœ„í•œ JS ë§Œë“¤ê¸°
ï¸ğŸ“„ ë¡œê·¸ì¸ ê¸°ëŠ¥ê³¼ ì—°ê²°í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ìƒì„±, ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•´ ì •ì  ê²½ë¡œ ì„¤ì •

![](https://velog.velcdn.com/images/kitree/post/4bb712fe-96ba-4b30-8b22-c745a159ff58/image.JPG)

## 8. DOMìœ¼ë¡œ HTML ê°ì²´ ì œì–´í•˜ê¸°
> DOMì€ ë¬¸ì„œ ê°ì²´ ëª¨ë¸ë¡œ, ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ HTML ë°ì´í„° ì œì–´ ê°€ëŠ¥.

ï¸ğŸ§©ï¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹ ìš”ì†Œ ê°€ì ¸ì˜¤ê¸° ë° ê¸°ëŠ¥ êµ¬í˜„

![](https://velog.velcdn.com/images/kitree/post/9d60e4d0-6163-406f-9f29-7d2ce294dbe1/image.JPG)

## 9. í”„ëŸ°íŠ¸ì—ì„œ ì„œë²„ë¡œ ë°ì´í„° ë³´ë‚´ê¸°
ğŸ“¥ fetchë¥¼ ì´ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì…ë ¥í•œ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ ê°’ì„ ì„œë²„ì—ê²Œ ì „ë‹¬. í´ë¼ì´ì–¸íŠ¸ëŠ” ì…ë ¥ëœ ì •ë³´ë¥¼ ê°ì²´ë¡œ ë§Œë“¤ê³ , fetchë¥¼ í†µí•´ "/login" ì—”ë“œí¬ì¸íŠ¸ë¡œ POST ìš”ì²­ì„ ë³´ë‚¸ë‹¤. ì´ë•Œ ìš”ì²­ì€ JSON í˜•ì‹ìœ¼ë¡œ ì „ì†¡ëœë‹¤.

![](https://velog.velcdn.com/images/kitree/post/a5620f4f-ca1a-4123-8d84-8f86f30becf9/image.JPG)
 
## 10. ë¡œê·¸ì¸ API ë§Œë“¤ê¸° in ì„œë²„
ğŸ“¨ í´ë¼ì´ì–¸íŠ¸ëŠ” "/login" ì—”ë“œí¬ì¸íŠ¸ë¡œ POST ìš”ì²­ì„ ë³´ë‚´ê³ , ì„œë²„ëŠ” í•´ë‹¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ì—¬ ìš”ì²­ëœ ë°ì´í„°ë¥¼ íŒŒì‹±í•œë‹¤.

- Expressì˜ ë¼ìš°í„°ë¥¼ ì„¤ì •. "/login" ì—”ë“œí¬ì¸íŠ¸ë¡œì˜ GET ìš”ì²­ì€ ctrl.output.login í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³ , POST ìš”ì²­ì€ ctrl.process.login í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.

```jsx
// app/src/routes/home/index.js
"use strict";

const express = require("express");
const router = express.Router();

const ctrl = require("./home.ctrl");

router.get("/", ctrl.output.hello);
router.get("/login", ctrl.output.login);
router.post("/login", ctrl.process.login);

module.exports = router;
```

- ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ í•¨ìˆ˜ë“¤ì„ ì •ì˜. output ê°ì²´ì—ëŠ” í™ˆ í˜ì´ì§€ì™€ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜ê°€ ìˆê³ , process ê°ì²´ì—ëŠ” ë¡œê·¸ì¸ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ê°€ ìˆë‹¤.

```jsx
// app/src/routes/home/home.ctrl.js
"use strict";

const output = {
  hello: (req, res) => {
    res.render("home/index");
  },

  login: (req, res) => {
    res.render("home/login");
  },
};

const process = {
  login: (req,res) => {
    console.log(req.body);
  },
};

module.exports = {
  output,
  process
};
```

- ìš”ì²­ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ê¸° ìœ„í•´ body-parser ë¯¸ë“¤ì›¨ì–´ë¥¼ ì„¤ì •. body-parserëŠ” JSON í˜•ì‹ì˜ ìš”ì²­ ë³¸ë¬¸ì„ íŒŒì‹±í•˜ì—¬ JavaScript ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.

```jsx
//  /app/app.js
"use strict";

// ëª¨ë“ˆ
const express = require("express");
const bodyParser = require("body-parser");
const app = express();

// ë¼ìš°íŒ…
const home = require("./src/routes/home");

// ì•± ì„¸íŒ…
app.set("views", "./src/views");
app.set("view engine", "ejs");
app.use(express.static(`${__dirname}/src/public`));

app.use(bodyParser.json());
// URLì„ í†µí•´ ì „ë‹¬ë˜ëŠ” ë°ì´í„°ì— í•œê¸€, ê³µë°± ë“±ê³¼ ê°™ì€ ë¬¸ìê°€ í¬í•¨ë  ê²½ìš° ì œëŒ€ë¡œ ì¸ì‹ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ í•´ê²°
app.use(bodyParser.urlencoded({ extended: true }));

app.use("/", home); // use -> ë¯¸ë“¤ ì›¨ì–´ë¥¼ ë“±ë¡í•´ì£¼ëŠ” ë©”ì„œë“œ.

module.exports = app;
```

## 11. ë¡œê·¸ì¸ ì¸ì¦ ê¸°ëŠ¥ ë§Œë“¤ê¸° in ì„œë²„
ğŸ” ë¡œê·¸ì¸ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì „ë‹¬í•œ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ ê°’ì„ ì„œë²„ì—ì„œ ì¸ì¦í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•œë°, í•´ë‹¹ ë°ì´í„°ë¥¼ ì„œë²„ê°€ ê°€ì§€ê³  ìˆì–´ì•¼ í•˜ë¯€ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ ìì²´ì—ì„œ ìœ ì € ë°ì´í„°ë¥¼ ë§Œë“¤ê³  ì¸ì¦í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹œë‹¤. 

- í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë§Œë“¤ì–´ POST ìš”ì²­ìœ¼ë¡œ ì„œë²„ì— ë³´ë‚´ê³  ì„œë²„ëŠ” "/login" ì—”ë“œí¬ì¸íŠ¸ë¡œë¶€í„° POST ìš”ì²­ì„ ë°›ì•„ ë¡œê·¸ì¸ ì²˜ë¦¬ë¥¼ í•œë‹¤. 

```jsx
// app/src/public/js/home/login.js
"use strict";

const id = document.querySelector("#id"),
  psword = document.querySelector("#psword"),
  loginBtn = document.querySelector("button");

loginBtn.addEventListener("click", login);

function login() {
  const req = {
    id: id.value,
    psword: psword.value,
  };
  fetch("/login", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(req),
  })
    .then((res) => res.json())
    .then(console.log);
}
```

- users ê°ì²´ì— ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ê°€ ë°°ì—´ í˜•íƒœë¡œ ì €ì¥ë˜ì–´ ìˆëŠ” ê°„ë‹¨í•œ ìœ ì € ë°ì´í„°ë¥¼ ì •ì˜í•˜ê³ , ìš”ì²­ ë°ì´í„°ì—ì„œ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì¶”ì¶œí•œ í›„ ë¹„êµí•œë‹¤. ìœ ì € ë°ì´í„°ì— ì¼ì¹˜í•˜ëŠ” ì •ë³´ê°€ ìˆë‹¤ë©´ ë¡œê·¸ì¸ ì„±ê³µì„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µí•˜ê³ , ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ ë¡œê·¸ì¸ ì‹¤íŒ¨ë¥¼ ì‘ë‹µí•œë‹¤.

```jsx
// app/src/routes/home/home.ctrl.js
"use strict";

const output = {
  hello: (req, res) => {
    res.render("home/index");
  },

  login: (req, res) => {
    res.render("home/login");
  },
};

const users = {
  id: ["test", "ki", "noh"],
  psword: ["1234", "5678", "9000"],
};

const process = {
  login: (req, res) => {
    const id = req.body.id,
      psword = req.body.psword;

    console.log(id, psword);

    if (users.id.includes(id)) {
      const idx = users.id.indexOf(id);
      if (users.psword[idx] === psword) {
        return res.json({
          success: true,
        });
      }
    }
    return res.json({
      sucess: false,
      msg: "ë¡œê·¸ì¸ì— ì‹¤íŒ¨í•˜ì…¨ìŠµë‹ˆë‹¤.",
    });
  },
};

module.exports = {
  output,
  process,
};
```
